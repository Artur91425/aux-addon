<Ui xsi:schemaLocation="http://www.blizzard.com/wow/ui/">

	<Script file="item_search_frame.lua"/>

	<Frame>
      <Scripts> 
			<OnUpdate> 
				Aux.item_search_frame.on_update()
			</OnUpdate> 
		</Scripts> 
	</Frame>

    <Frame name="AuxItemSearchFrame" hidden="true" parent="AuxFrame" setAllPoints="true">
		<Frames>
            <Frame name="$parentItem" inherits="AuxFrameBoxTemplate">
                <Size><AbsDimension x="213" y="120"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="5" y="-35"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnLoad>
                        getglobal(this:GetName().."Title"):SetText('Item')
                    </OnLoad>
                </Scripts>
                <Frames>
                    <Button name="$parentItem" inherits="AuxItemTemplate">
                        <Anchors><Anchor point="TOP"><Offset><AbsDimension x="0" y="-20"/></Offset></Anchor></Anchors>
                        <scripts>
                            <OnLoad>
                                this:SetHighlightTexture(nil)
                            </OnLoad>
                            <OnClick>
                                AuxItemSearchFrameItemItemInputBox:Show()
                                Aux.item_search_frame.update_item()
                                AuxItemSearchFrameItemItemInputBox:SetText('')
                                AuxItemSearchFrameItemItemInputBox:SetFocus()
                            </OnClick>
                        </scripts>
                    </Button>
                    <EditBox name="$parentPageEditBox" numeric="true" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors><Anchor point="BOTTOMLEFT" ><Offset><AbsDimension x="111" y="15"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName()..'Label'):SetText('Page')
                                this:SetWidth(30)
                                this:EnableMouse(false)
                                this:SetAlpha(0.5)
                            </OnLoad>
                            <OnEnterPressed>
                                this:ClearFocus()
                            </OnEnterPressed>
                        </Scripts>
                    </EditBox>
                    <CheckButton name="$parentAllPagesCheckButton" inherits="UICheckButtonTemplate" checked="true">
                        <Size><AbsDimension x="22" y="22"/></Size>
                        <Anchors><Anchor point="BOTTOMLEFT" ><Offset><AbsDimension x="144" y="15"/></Offset></Anchor></Anchors>
                        <Layers>
                            <Layer level="OVERLAY">
                                <FontString inherits="GameFontNormalSmall" text="All" justifyH="LEFT">
                                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="9"/></Offset></Anchor></Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                        <Scripts>
                            <OnClick>
                                AuxItemSearchFrameItemPageEditBox:EnableMouse(not this:GetChecked())
                                AuxItemSearchFrameItemPageEditBox:SetAlpha(this:GetChecked() and 0.5 or 1)
                                AuxItemSearchFrameItemPageEditBox:ClearFocus()
                            </OnClick>
                        </Scripts>
                    </CheckButton>
                </Frames>
            </Frame>
            <Frame name="$parentRecentlySearched" inherits="AuxFrameBoxTemplate">
                <Size>
                    <AbsDimension x="213" y="186"/>
                </Size>
                <Anchors><Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="$parentItem"><Offset><AbsDimension x="0" y="-20"/></Offset></Anchor></Anchors>
                <Anchors><Anchor point="BOTTOM" relativePoint="BOTTOM" relativeTo="$parentAuctions"><Offset><AbsDimension x="0" y="-20"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnLoad>
                        getglobal(this:GetName().."Title"):SetText('Recently Searched')
                    </OnLoad>
                </Scripts>
                <Frames>
                    <Frame name="$parentListing">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOM"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local config = Aux.item_search_frame.recently_searched_config
                                this.sheet = Aux.sheet.create{
                                    frame = this,
                                    columns = config.columns,
                                    sort_order = config.sort_order,
                                    row_setter = config.row_setter,
                                    on_row_click = config.on_row_click,
                                    on_row_enter = config.on_row_enter,
                                    on_row_leave = config.on_row_leave,
                                    plain = true,
                                }
                            </OnLoad>
                        </Scripts>
                    </Frame>
                </Frames>
            </Frame>
            <Frame name="$parentAuctions" inherits="AuxFrameBoxTemplate">
                <Size>
                    <AbsDimension x="620" y="326"/>
                </Size>
                <Anchors><Anchor point="TOPLEFT" relativePoint="TOPRIGHT" relativeTo="$parentItem"><Offset><AbsDimension x="3" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnLoad>
                        <!--getglobal(this:GetName().."Title"):SetText('Search Results')-->
                    </OnLoad>
                </Scripts>
                <Frames>
                    <Frame name="$parentBuyListing" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOM"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local config = Aux.item_search_frame.views[1]
                                this.sheet = Aux.sheet.create{
                                    frame = this,
                                    columns = config.columns,
                                    sort_order =  config.sort_order,
                                    row_setter = config.row_setter,
                                    on_row_click = config.on_row_click,
                                    on_row_enter = config.on_row_enter,
                                    on_row_leave = config.on_row_leave,
                                    on_row_update = config.on_row_update,
                                }
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    <Frame name="$parentBidListing" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOM"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local config = Aux.item_search_frame.views[2]
                                this.sheet = Aux.sheet.create{
                                    frame = this,
                                    columns = config.columns,
                                    sort_order = config.sort_order,
                                    row_setter = config.row_setter,
                                    on_row_click = config.on_row_click,
                                    on_row_enter = config.on_row_enter,
                                    on_row_leave = config.on_row_leave,
                                    on_row_update = config.on_row_update,
                                }
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    <Frame name="$parentFullListing" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOM"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local config = Aux.item_search_frame.views[3]
                                this.sheet = Aux.sheet.create{
                                    frame = this,
                                    columns = config.columns,
                                    sort_order = config.sort_order,
                                    row_setter = config.row_setter,
                                    on_row_click = config.on_row_click,
                                    on_row_enter = config.on_row_enter,
                                    on_row_leave = config.on_row_leave,
                                    on_row_update = config.on_row_update,
                                }
                            </OnLoad>
                        </Scripts>
                    </Frame>
                </Frames>
            </Frame>
		</Frames>
	</Frame>
</Ui>
