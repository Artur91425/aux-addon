<Ui xsi:schemaLocation="http://www.blizzard.com/wow/ui/">

	<Script file="search_frame.lua"/> 

	<Frame>
      <Scripts> 
			<OnUpdate> 
				Aux.buy.onupdate()
			</OnUpdate> 
		</Scripts> 
	</Frame>

    <Frame name="AuxBuyFrame" hidden="true" parent="AuxFrame" setAllPoints="true">
		<Frames>
            <Frame name="AuxBuyFilters" inherits="AuxFrameBoxTemplate">
                <Size><AbsDimension x="213" y="326"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="5" y="-35"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnLoad>
                        this:SetBackdropBorderColor(0.4, 0.4, 0.4)
                        this:SetBackdropColor(0.15, 0.15, 0.15)
                        <!--getglobal(this:GetName().."Title"):SetText('Filters')-->
                    </OnLoad>
                </Scripts>
                <Frames>
                    <Button name="$parentTab1" inherits="AuxTopTabTemplate" id="1">
                        <Anchors>
                            <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
                                <Offset>
                                    <AbsDimension x="7" y="-2"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName().."Text"):SetText('Item')
                            </OnLoad>
                            <OnClick>
                                Aux.browse_frame.set_filter(this:GetID())
                            </OnClick>
                        </Scripts>
                    </Button>
                    <Button name="$parentTab2" inherits="AuxTopTabTemplate" id="2">
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentTab1" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName().."Text"):SetText('Filters')
                            </OnLoad>
                            <OnClick>
                                Aux.browse_frame.set_filter(this:GetID())
                            </OnClick>
                        </Scripts>
                    </Button>

                    <Button name="$parentItem" inherits="AuxItemTemplate">
                        <Anchors><Anchor point="TOP"><Offset><AbsDimension x="0" y="-20"/></Offset></Anchor></Anchors>
                        <scripts>
                            <OnLoad>
                                this:SetHighlightTexture(nil)
                            </OnLoad>
                            <OnClick>
                                Aux.browse_frame.set_item()
                                Aux.browse_frame.update_item()
                                AuxBuyFiltersItemInputBox:SetText('')
                                AuxBuyFiltersItemInputBox:SetFocus()
                            </OnClick>
                        </scripts>
                    </Button>

                    <EditBox name="$parentItemInputBox" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors><Anchor point="TOP"><Offset><AbsDimension x="0" y="-28"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName()..'Label'):SetText('Item')
                                this.completor = Aux.completion.completor(this)
                                this:SetWidth(193)
                            </OnLoad>
                            <OnTextChanged>
                                this.completor.suggest()
                            </OnTextChanged>
                            <OnTabPressed>
                                if IsShiftKeyDown() then
                                this.completor.previous()
                                else
                                this.completor.next()
                                end
                            </OnTabPressed>
                            <OnEnterPressed>
                                this.completor.close()
                                this:ClearFocus()
                                Aux.buy.SearchButton_onclick()
                            </OnEnterPressed>
                            <OnEscapePressed>
                                if this.completor.open() then
                                this.completor.close()
                                else
                                this:ClearFocus()
                                end
                            </OnEscapePressed>
                        </Scripts>
                    </EditBox>

                    <EditBox name="AuxBuyNameInputBox" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="16" y="-71"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName()..'Label'):SetText('Name')
                            </OnLoad>
                            <OnEnterPressed>
                                this:ClearFocus()
                                Aux.buy.SearchButton_onclick()
                            </OnEnterPressed>
                            <OnEscapePressed>
                                this:ClearFocus()
                            </OnEscapePressed>
                        </Scripts>
                    </EditBox>

                    <Frame name="AuxBuyCategoryDropDown" inherits="UIDropDownMenuTemplate">
                        <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="-8" y="-104" /></Offset></Anchor></Anchors>
                        <Layers>
                            <Layer level="BACKGROUND">
                                <FontString name="$parentLabel" inherits="GameFontNormalSmall" text="Category">
                                    <Anchors>
                                        <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
                                            <Offset>
                                                <AbsDimension x="21" y="0"/>
                                            </Offset>
                                        </Anchor>
                                    </Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                        <Scripts>
                            <OnLoad>
                                UIDropDownMenu_SetWidth(140)
                                UIDropDownMenu_Initialize(this, AuxBuyCategoryDropDown_Initialize)
                            </OnLoad>
                            <OnShow>
                                UIDropDownMenu_Initialize(this, AuxBuyCategoryDropDown_Initialize)
                            </OnShow>
                        </Scripts>
                    </Frame>

                    <Frame name="AuxBuyQualityDropDown" inherits="UIDropDownMenuTemplate">
                        <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="-8" y="-143" /></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnLoad>
                                UIDropDownMenu_SetWidth(140)
                                UIDropDownMenu_Initialize(this, AuxBuyQualityDropDown_Initialize)
                            </OnLoad>
                            <OnShow>
                                UIDropDownMenu_Initialize(this, AuxBuyQualityDropDown_Initialize)
                            </OnShow>
                        </Scripts>
                        <Layers>
                            <Layer level="BACKGROUND">
                                <FontString name="$parentLabel" inherits="GameFontNormalSmall" text="Rarity">
                                    <Anchors>
                                        <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
                                            <Offset>
                                                <AbsDimension x="21" y="0"/>
                                            </Offset>
                                        </Anchor>
                                    </Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                    </Frame>

                    <EditBox name="AuxBuyMinLevel" letters="2" numeric="true" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="15" y="-182"/></Offset></Anchor>
                        </Anchors>
                        <Layers>
                            <Layer level="ARTWORK">
                                <FontString inherits="GameFontHighlightSmall" text="-">
                                    <Anchors><Anchor point="LEFT" relativePoint="RIGHT"><Offset><AbsDimension x="-1" y="0"/></Offset></Anchor></Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName()..'Label'):SetText('Level Range')
                                this:SetWidth(30)
                            </OnLoad>
                            <OnEnterPressed>
                                this:ClearFocus()
                            </OnEnterPressed>
                        </Scripts>
                    </EditBox>
                    <EditBox name="AuxBuyMaxLevel" letters="2" numeric="true" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="AuxBuyMinLevel" relativePoint="RIGHT"><Offset><AbsDimension x="8" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                this:SetWidth(30)
                            </OnLoad>
                            <OnEnterPressed>
                                this:ClearFocus()
                            </OnEnterPressed>
                        </Scripts>
                    </EditBox>
                    <CheckButton name="AuxBuyUsableCheckButton" inherits="UICheckButtonTemplate">
                        <Size><AbsDimension x="22" y="22"/></Size>
                        <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="87" y="-182" /></Offset></Anchor></Anchors>
                        <Layers>
                            <Layer level="OVERLAY">
                                <FontString inherits="GameFontNormalSmall" text="Usable" justifyH="LEFT">
                                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="9"/></Offset></Anchor></Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                    </CheckButton>

                    <EditBox name="AuxBuyTooltipInputBox" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="15" y="-216"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName()..'Label'):SetText('Tooltip')
                                this:SetWidth(110)
                            </OnLoad>
                            <OnEnterPressed>
                                AuxBuyTooltipButton_OnClick(this)
                            </OnEnterPressed>
                        </Scripts>
                    </EditBox>

                    <Frame name="AuxBuyTooltipDropDown" inherits="UIDropDownMenuTemplate" hidden="true">
                        <Scripts>
                            <OnLoad>
                                UIDropDownMenu_Initialize(this, AuxBuyTooltipDropDown_Initialize)
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    <Button name="AuxBuyTooltipArrow">
                        <Size><AbsDimension x="24" y="24"/></Size>
                        <Anchors><Anchor point="LEFT" relativePoint="RIGHT" relativeTo="AuxBuyTooltipInputBox"><Offset><AbsDimension x="-4" y="0"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnClick>
                                Aux.buy.toggle_tooltip_dropdown()
                                PlaySound("igMainMenuOptionCheckBoxOn")
                            </OnClick>
                        </Scripts>
                        <NormalTexture name="$parentNormalTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Up">
                            <Size><AbsDimension x="24" y="24"/></Size>
                            <Anchors><Anchor point="RIGHT"/></Anchors>
                        </NormalTexture>
                        <PushedTexture name="$parentPushedTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Down">
                            <Size><AbsDimension x="24" y="24"/></Size>
                            <Anchors><Anchor point="RIGHT"/></Anchors>
                        </PushedTexture>
                        <DisabledTexture name="$parentDisabledTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Disabled">
                            <Size><AbsDimension x="24" y="24"/></Size>
                            <Anchors><Anchor point="RIGHT"/></Anchors>
                        </DisabledTexture>
                        <HighlightTexture name="$parentHighlightTexture" file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD">
                            <Size><AbsDimension x="24" y="24"/></Size>
                            <Anchors><Anchor point="RIGHT"/></Anchors>
                        </HighlightTexture>
                    </Button>
                    <Button name="AuxBuyTooltipButton" inherits="UIPanelButtonTemplate" text="+">
                        <Size><AbsDimension x="22" y="22"/></Size>
                        <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="143" y="-216"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnClick>
                                AuxBuyTooltipButton_OnClick(this)
                            </OnClick>
                        </Scripts>
                    </Button>

                    <Button name="AuxBuySearchButton" inherits="UIPanelButtonTemplate" text="Search">
                        <Size><AbsDimension x="90" y="26"/></Size>
                        <Anchors><Anchor point="BOTTOMLEFT" ><Offset><AbsDimension x="5" y="5"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnClick>
                                Aux.buy.SearchButton_onclick()
                            </OnClick>
                        </Scripts>
                    </Button>
                    <EditBox name="AuxBuyPageEditBox" numeric="true" autoFocus="false" inherits="AuxInputBoxTemplate">
                        <Anchors><Anchor point="BOTTOMLEFT" ><Offset><AbsDimension x="110" y="5"/></Offset></Anchor></Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName()..'Label'):SetText('Page')
                                this:SetWidth(30)
                                this:EnableMouse(false)
                                this:SetAlpha(0.5)
                            </OnLoad>
                            <OnEnterPressed>
                                this:ClearFocus()
                            </OnEnterPressed>
                        </Scripts>
                    </EditBox>
                    <CheckButton name="AuxBuyAllPagesCheckButton" inherits="UICheckButtonTemplate" checked="true">
                        <Size><AbsDimension x="22" y="22"/></Size>
                        <Anchors><Anchor point="BOTTOMLEFT" ><Offset><AbsDimension x="143" y="5"/></Offset></Anchor></Anchors>
                        <Layers>
                            <Layer level="OVERLAY">
                                <FontString inherits="GameFontNormalSmall" text="All" justifyH="LEFT">
                                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="9"/></Offset></Anchor></Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                        <Scripts>
                            <OnClick>
                                AuxBuyPageEditBox:EnableMouse(not this:GetChecked())
                                AuxBuyPageEditBox:SetAlpha(this:GetChecked() and 0.5 or 1)
                                AuxBuyPageEditBox:ClearFocus()
                            </OnClick>
                        </Scripts>
                    </CheckButton>
                </Frames>
            </Frame>
            <Frame name="AuxBuySheetFrame" inherits="AuxFrameBoxTemplate">
                <Size>
                    <AbsDimension x="655" y="326"/>
                </Size>
                <Anchors><Anchor point="TOPLEFT" relativePoint="TOPRIGHT" relativeTo="AuxBuyFilters"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnLoad>
                        this:SetBackdropBorderColor(0.4, 0.4, 0.4)
                        this:SetBackdropColor(0.15, 0.15, 0.15)
                        <!--getglobal(this:GetName().."Title"):SetText('Search Results')-->
                    </OnLoad>
                </Scripts>
                <Frames>
                    <Button name="$parentTab1" inherits="AuxTopTabTemplate" id="1">
                        <Anchors>
                            <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
                                <Offset>
                                    <AbsDimension x="7" y="-2"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName().."Text"):SetText('Buy')
                            </OnLoad>
                            <OnClick>
                                Aux.browse_frame.set_view(this:GetID())
                            </OnClick>
                        </Scripts>
                    </Button>
                    <Button name="$parentTab2" inherits="AuxTopTabTemplate" id="2">
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentTab1" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName().."Text"):SetText('Bid')
                            </OnLoad>
                            <OnClick>
                                Aux.browse_frame.set_view(this:GetID())
                            </OnClick>
                        </Scripts>
                    </Button>
                    <Button name="$parentTab3" inherits="AuxTopTabTemplate" id="3">
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentTab2" relativePoint="RIGHT">
                                <Offset>
                                    <AbsDimension x="0" y="0"/>
                                </Offset>
                            </Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                getglobal(this:GetName().."Text"):SetText('Full')
                            </OnLoad>
                            <OnClick>
                                Aux.browse_frame.set_view(this:GetID())
                            </OnClick>
                        </Scripts>
                    </Button>
                    <Frame name="AuxBuyBuyList" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="-40" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local sort_order = Aux.util.map(Aux.buy.modes[1].sort_order, function(column_order) return { column = Aux.buy.modes[1].columns[column_order.column], sort_ascending = column_order.order == 'ascending' } end)
                                this.sheet = Aux.sheet.create(this, Aux.buy.modes[1].columns, sort_order, Aux.buy.modes[1].row_setter, Aux.buy.modes[1].on_cell_click, Aux.buy.modes[1].on_cell_enter, Aux.buy.modes[1].on_cell_leave)
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    <Frame name="AuxBuyBidList" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="-40" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local sort_order = Aux.util.map(Aux.buy.modes[2].sort_order, function(column_order) return { column = Aux.buy.modes[2].columns[column_order.column], sort_ascending = column_order.order == 'ascending' } end)
                                this.sheet = Aux.sheet.create(this, Aux.buy.modes[2].columns, sort_order, Aux.buy.modes[2].row_setter, Aux.buy.modes[2].on_cell_click, Aux.buy.modes[2].on_cell_enter, Aux.buy.modes[2].on_cell_leave)
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    <Frame name="AuxBuyFullList" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="-40" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnLoad>
                                local sort_order = Aux.util.map(Aux.buy.modes[3].sort_order, function(column_order) return { column = Aux.buy.modes[3].columns[column_order.column], sort_ascending = column_order.order == 'ascending' } end)
                                this.sheet = Aux.sheet.create(this, Aux.buy.modes[3].columns, sort_order, Aux.buy.modes[3].row_setter, Aux.buy.modes[3].on_cell_click, Aux.buy.modes[3].on_cell_enter, Aux.buy.modes[3].on_cell_leave)
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    <Frame name="AuxBuyConfirmation" frameStrata="FULLSCREEN_DIALOG" inherits="OptionFrameBoxTemplate" enableMouse="true" enableMouseWheel="true" hidden="true">
                        <Anchors>
                            <Anchor point="TOPLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                            <Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor>
                        </Anchors>
                        <Scripts>
                            <OnMouseWheel></OnMouseWheel>
                        </Scripts>
                        <Frames>
                            <Frame name="$parentContent">
                                <Anchors><Anchor point="CENTER"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor></Anchors>
                                <Size><AbsDimension x="193" y="140"/></Size>
                                <Frames>
                                    <Frame name="$parentItem" inherits="AuxItemTemplate">
                                        <Anchors><Anchor point="TOP"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor></Anchors>
                                    </Frame>
                                    <Frame name="$parentBid" inherits="MoneyInputFrameTemplate">
                                        <Anchors><Anchor point="BOTTOM"><Offset><AbsDimension x="30" y="48"/></Offset></Anchor></Anchors>
                                        <Layers>
                                            <Layer level="OVERLAY">
                                                <FontString inherits="GameFontNormal" text="Price:" justifyH="RIGHT">
                                                    <Anchors><Anchor point="RIGHT" relativePoint="LEFT"><Offset><AbsDimension x="-10" y="0"/></Offset></Anchor></Anchors>
                                                </FontString>
                                            </Layer>
                                        </Layers>
                                    </Frame>
                                    <Frame name="$parentBuyoutPrice" inherits="SmallMoneyFrameTemplate">
                                        <Anchors><Anchor point="BOTTOM"><Offset><AbsDimension x="30" y="50"/></Offset></Anchor></Anchors>
                                        <Scripts>
                                            <OnLoad>
                                                SmallMoneyFrame_OnLoad()
                                                MoneyFrame_SetType("STATIC")
                                            </OnLoad>
                                        </Scripts>
                                        <Layers>
                                            <Layer level="OVERLAY">
                                                <FontString inherits="GameFontNormal" text="Price:" justifyH="RIGHT">
                                                    <Anchors><Anchor point="RIGHT" relativePoint="LEFT"><Offset><AbsDimension x="-5" y="0"/></Offset></Anchor></Anchors>
                                                </FontString>
                                            </Layer>
                                        </Layers>
                                    </Frame>
                                    <Button name="$parentActionButton" inherits="UIPanelButtonTemplate" text="Buy" disabled="true">
                                        <Size><AbsDimension x="90" y="26"/>	</Size>
                                        <Anchors><Anchor point="BOTTOMLEFT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor></Anchors>
                                        <Scripts>
                                            <OnClick>
                                                Aux.buy.dialog_action()
                                            </OnClick>
                                        </Scripts>
                                    </Button>
                                    <Button name="$parentCancelButton" inherits="UIPanelButtonTemplate" text="Cancel">
                                        <Size><AbsDimension x="90" y="26"/></Size>
                                        <Anchors><Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="0" y="0"/></Offset></Anchor></Anchors>
                                        <Scripts>
                                            <OnClick>
                                                Aux.buy.dialog_cancel()
                                            </OnClick>
                                        </Scripts>
                                    </Button>
                                </Frames>
                            </Frame>
                        </Frames>
                    </Frame>
                </Frames>
            </Frame>
            <Button name="AuxBuyStopButton" inherits="UIPanelButtonTemplate" text="Stop" hidden="true">
                <Size><AbsDimension x="90" y="26"/></Size>
                <Anchors><Anchor point="RIGHT" relativePoint="LEFT" relativeTo="AuxAuctionFrameButton"><Offset><AbsDimension x="-25" y="0"/></Offset></Anchor></Anchors>
                <Scripts>
                    <OnClick>
                        Aux.buy.StopButton_onclick()
                    </OnClick>
                </Scripts>
            </Button>
		</Frames>
	</Frame>
</Ui>
